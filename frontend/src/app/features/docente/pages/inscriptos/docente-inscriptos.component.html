<p-button
  label="Volver"
  icon="pi pi-arrow-left"
  class="mb-4"
  (onClick)="goBack()"
></p-button>

<h1 class="text-2xl font-semibold mb-4">
  Inscriptos – Materia #{{ materiaId() }}
</h1>

@if (loading()) {
<p>Cargando...</p>
} @else if (error()) {
<p class="text-red-600">{{ error() }}</p>
} @else { @if (inscriptos().length === 0) {
<p>No hay alumnos inscriptos.</p>
} @else {
<div class="space-y-3">
  @for (a of inscriptos(); track a.alumno_id) {
  <div class="rounded-lg border p-4">
    <div class="font-medium">{{ a.apellido }}, {{ a.nombre }}</div>
    <div class="text-sm text-gray-600">{{ a.email }}</div>
    <div class="text-sm mt-2">
      Estado: {{ a.estado }} · Año: {{ a.anio ?? "-" }} · Período:
      {{ a.periodo ?? "-" }}
    </div>
    <div class="mt-4 border-t pt-3">
      <div class="font-medium mb-2">Calificaciones</div>

      @if (!a.calificaciones || a.calificaciones.length === 0) {
      <div class="text-sm text-gray-600">Todavía no hay calificaciones.</div>
      } @else {
      <div class="space-y-2">
        @for (c of a.calificaciones; track c.calificacion_id) {
        <div class="rounded-md bg-gray-50 p-3">
          <div class="text-sm">
            <span class="font-medium">{{ c.tipo }}</span>
            · Nota: <span class="font-medium">{{ c.nota }}</span>
          </div>

          <div class="text-sm text-gray-600">
            Fecha: {{ c.fecha | date : "short" }}
          </div>

          @if (c.descripcion) {
          <div class="text-sm text-gray-600 mt-1">
            {{ c.descripcion }}
          </div>
          }
        </div>
        }
      </div>
      }
    </div>
  </div>
  }
</div>
} }
